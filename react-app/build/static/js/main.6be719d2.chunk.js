(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],Array(18).concat([function(e,t,a){e.exports=a(65)},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(9),r=a.n(s),c=a(1),i=a(2);a(26);const o=n.a.createContext();function m(e){let{children:t}=e;const a=Object(l.useRef)(),[s,r]=Object(l.useState)(null),[c,i]=Object(l.useState)(null),m={modalRef:a,modalContent:s,setModalContent:r,setOnModalClose:i,closeModal:()=>{r(null),"function"===typeof c&&(i(null),c())}};return n.a.createElement(n.a.Fragment,null,n.a.createElement(o.Provider,{value:m},t),n.a.createElement("div",{ref:a}))}function u(){const{modalRef:e,modalContent:t,closeModal:a}=Object(l.useContext)(o);return e&&e.current&&t?r.a.createPortal(n.a.createElement("div",{id:"modal"},n.a.createElement("div",{id:"modal-background",onClick:a}),n.a.createElement("div",{id:"modal-content"},t)),e.current):null}const d=()=>Object(l.useContext)(o);var E=a(12),p=a(17);const g="session/SET_USER",b=e=>({type:g,payload:e}),y={user:null},f=(e,t)=>async a=>{const l=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(l.ok){const e=await l.json();return a(b(e)),null}if(!(l.status<500))return["An error occurred. Please try again."];{const e=await l.json();if(e.errors)return e.errors}},v=()=>async e=>{(await fetch("/api/auth/logout",{headers:{"Content-Type":"application/json"}})).ok&&e({type:"session/REMOVE_USER"})};const h=e=>({type:"songs/LOAD_SONGS",songs:e}),O=e=>({type:"songs/RECEIVE_SONG",song:e}),j=e=>async t=>{const a=await fetch("/api/songs/"+e);if(a.ok){const e=await a.json();return t(O(e)),e}return a};var N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"songs/LOAD_SONGS":return{...e,...t.songs};case"songs/RECEIVE_SONG":return t.song?t.song.id?{...e,[t.song.id]:t.song}:(console.error("Error: action.song.id is undefined"),e):(console.error("Error: action.song is undefined"),e);case"songs/UPDATE_SONG":return{...e,[t.song.id]:t.song};case"songs/REMOVE_SONG":const a={...e};return delete a[t.songId],a;default:return e}};const S=e=>({type:"albums/LOAD_ALBUMS",albums:e}),w=e=>async t=>{const a=await fetch("/api/albums/"+e);if(a.ok){const e=await a.json();return t({type:"albums/LOAD_ALBUM_DETAILS",album:e}),e}return a},k=()=>async e=>{const t=await fetch("/api/albums/current");if(t.ok){const a=await t.json();return e(S(a)),a}return t};var _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"albums/LOAD_ALBUMS":{const a={...e};return t.albums.albums.forEach(e=>{a[e.id]||(a[e.id]=e)}),a}case"albums/LOAD_ALBUM_DETAILS":return{...e,[t.album.id]:t.album};case"albums/RECEIVE_ALBUM":return{...e,[t.album.id]:t.album};case"albums/UPDATE_ALBUM":return{...e};case"albums/REMOVE_ALBUM":{const a={...e};return delete a[t.album],a}case"albums/RECEIVE_ALBUM_SONG":return{...e};case"albums/REMOVE_ALBUM_SONG":return{...e};default:return e}};const L=()=>async e=>{const t=await fetch("/api/songs/likes");if(t.ok){const a=await t.json();return e((e=>({type:"likes/LOAD_LIKES",likes:e}))(a)),a}return t},C=e=>async t=>{const a=await fetch(`/api/songs/${e}/likes`);if(a.ok){const e=await a.json();return t((e=>({type:"likes/LOAD_SONG_LIKES",likes:e}))(e)),e}return a};var T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"likes/LOAD_LIKES":const a={...e};return t.likes.likes.forEach(e=>{a[e.id]||(a[e.id]=e)}),{...a};case"likes/LOAD_SONG_LIKES":return{...e,...t.likes};case"likes/RECEIVE_LIKE":return{...e,[t.like.id]:t.like};case"likes/REMOVE_LIKE":{const a={...e,...t.likes};return delete a[t.like],a}default:return e}};const A=e=>({type:"playlists/GET_ALL_PLAYLISTS",playlists:e}),I=e=>async t=>{const a=await fetch("/api/playlists/"+e);if(a.ok){const e=await a.json();t({type:"playlists/GET_PLAYLIST",playlist:e})}},R=()=>async e=>{const t=await fetch("/api/playlists/current");if(t.ok){const a=await t.json();return e(A(a)),a}return t};var P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{playlists:{},currPlaylist:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"playlists/GET_ALL_PLAYLISTS":return{...e,playlists:t.playlists};case"playlists/GET_PLAYLIST":return{...e,currentPlaylist:t.playlist};case"playlists/CREATE_PLAYLIST":return{...e,playlists:{...e.playlists,[t.playlist.id]:t.playlist}};case"playlists/UPDATE_PLAYLIST":return{...e,playlists:{...e.playlists,[t.playlist.id]:t.playlist}};case"playlists/ADD_SONG_TO_PLAYLIST":{const a={...e.playlists};return a[t.message.id]=t.message,{...e,playlists:a}}case"playlists/REMOVE_SONG_FROM_PLAYLIST":{const a={...e.playlists};return a[t.message.id]=t.message,{...e,playlists:a}}case"playlists/DELETE_PLAYLIST":const{[t.playlist.id]:a,...l}=e.playlists;return{...e,playlists:l};default:return e}};const x=()=>async e=>{const t=await fetch("/api/artists");if(t.ok){const a=await t.json();e({type:"artists/GET_ALL_artistS",artists:a.artists})}};var D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{artists:{},currArtist:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"artists/GET_ALL_artistS":const a={};return t.artists.forEach(e=>{a[e.id]=e}),{...e,artists:a};case"artists/GET_artist":return{...e,currentArtist:t.artist};case"artists/RECEIVE_ARTIST":return{...e,[t.artist.id]:t.artist};case"artists/UPDATE_ARTIST":return{...e};default:return e}};const M=Object(E.b)({session:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{user:t.payload};case"session/REMOVE_USER":return{user:null};default:return e}},albumsReducer:_,likesReducer:T,playlistsReducer:P,artistsReducer:D,songsReducer:N});let U;U=Object(E.a)(p.a);var F=e=>Object(E.c)(M,e,U),V=a(4);a(27);var $=function(e){let{modalComponent:t,itemText:a,onItemClick:l,onModalClose:s}=e;const{setModalContent:r,setOnModalClose:c}=d();return n.a.createElement("p",{className:"openModalButton",onClick:()=>{s&&c(s),r(t),l&&l()}},a)};a(28);var B=function(){const e=Object(c.b)(),[t,a]=Object(l.useState)(""),[s,r]=Object(l.useState)(""),[o,m]=Object(l.useState)([]),{closeModal:u}=d();return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"loginmodal"},n.a.createElement("h1",null,"Log In"),n.a.createElement("div",null,n.a.createElement("form",{id:"loginform",onSubmit:async a=>{a.preventDefault();const l=await e(f(t,s));l?m(l):u()}},n.a.createElement("div",null,o&&o.map((e,t)=>n.a.createElement("p",{key:t},e))),n.a.createElement("div",null,n.a.createElement("label",null,"Email",n.a.createElement("input",{className:"loginput",type:"text",value:t,onChange:e=>a(e.target.value),minLength:4,required:!0})),t.length<4&&n.a.createElement("p",null,"Email has at least 4 characters")),n.a.createElement("div",null,n.a.createElement("label",null,"Password",n.a.createElement("input",{className:"loginput",type:"password",value:s,onChange:e=>r(e.target.value),minLength:6,required:!0})),s.length<6&&n.a.createElement("p",null,"Password has at least 6 characters")),(t.length<4||s.length<6)&&n.a.createElement("button",{id:"disabledlogin",disabled:!0},"Log In"),t.length>=4&&s.length>=6&&n.a.createElement("button",{id:"loginsubmitbutton",type:"submit"},"Log In"),n.a.createElement("button",{id:"logindemobutton",onClick:async t=>{t.preventDefault(),await e(v()),u();return a("demo@aa.io"),r("password"),await e(f("demo@aa.io","password"))}},n.a.createElement(i.b,{className:"logindemobutton",to:"/"},"Log in as Demo User"))))))};a(35);var G=function(){const e=Object(c.b)(),[t,a]=Object(l.useState)(""),[s,r]=Object(l.useState)(""),[i,o]=Object(l.useState)(""),[m,u]=Object(l.useState)(""),[E,p]=Object(l.useState)([]),{closeModal:g}=d();let y=!0;return t.length>0&&m.length>0&&s.length>=4&&i.length>=6&&(y=!1),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"signupmodal"},n.a.createElement("h1",null,"Sign Up"),n.a.createElement("form",{id:"signupform",onSubmit:async a=>{if(a.preventDefault(),i===m){const a=await e(((e,t,a)=>async l=>{const n=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:a})});if(n.ok){const e=await n.json();return l(b(e)),null}if(!(n.status<500))return["An error occurred. Please try again."];{const e=await n.json();if(e.errors)return e.errors}})(s,t,i));a?p(a):g()}else p(["Confirm Password field must be the same as the Password field"])}},n.a.createElement("ul",null,E.map((e,t)=>n.a.createElement("li",{key:t},e))),n.a.createElement("label",null,"Email ",n.a.createElement("br",null),n.a.createElement("input",{className:"signupinput",type:"text",value:t,onChange:e=>a(e.target.value),minLength:4,required:!0})),t.length<4&&n.a.createElement("p",null,"Email has at least 4 characters"),n.a.createElement("label",null,"Username ",n.a.createElement("br",null),n.a.createElement("input",{className:"signupinput",type:"text",value:s,onChange:e=>r(e.target.value),required:!0})),n.a.createElement("label",null,"Password ",n.a.createElement("br",null),n.a.createElement("input",{className:"signupinput",type:"password",value:i,onChange:e=>o(e.target.value),minLength:6,required:!0})),i.length<6&&n.a.createElement("p",null,"Password has at least 6 characters"),n.a.createElement("label",null,"Confirm Password",n.a.createElement("input",{className:"signupinput",type:"password",value:m,onChange:e=>u(e.target.value),required:!0})),y&&n.a.createElement("button",{id:"disabledsignup"},"Sign Up"),!y&&n.a.createElement("button",{id:"regularsignup",type:"submit"},"Sign Up"))))};a(36);var Y=function(e){let{user:t}=e;const a=Object(c.b)(),[s,r]=Object(l.useState)(!1),o=Object(l.useRef)();Object(l.useEffect)(()=>{if(!s)return;const e=e=>{o.current.contains(e.target)||r(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[s]);const m=()=>r(!1),u="profile-dropdown"+(s?"":" hidden");return n.a.createElement("div",{id:"profileNavButtonMenuItem"},!t&&n.a.createElement("div",{id:"menuitemlogin"},n.a.createElement($,{itemText:"Log In",onItemClick:m,modalComponent:n.a.createElement(B,null)})),!t&&n.a.createElement("div",{id:"menuitemsignup"},n.a.createElement($,{itemText:"Sign Up",onItemClick:m,modalComponent:n.a.createElement(G,null)})),n.a.createElement("div",{id:"iconandcloseopenmenu"},t&&!s&&n.a.createElement("div",{id:"openMenuNavButton",onClick:e=>{e.stopPropagation(),s||r(!0)}},n.a.createElement("i",{className:"fas fa-user-circle fa-2x"}),n.a.createElement("i",{className:"fas fa-sort-down fa-2x"})),t&&s&&n.a.createElement("div",{id:"closeMenuNavButton",onClick:m},n.a.createElement("i",{className:"fas fa-user-circle fa-2x"}),n.a.createElement("i",{className:"fas fa-sort-up fa-2x"})),n.a.createElement("section",{className:u,ref:o},t?n.a.createElement("div",{id:"menuwithlogout"},n.a.createElement("div",null,"Hello, ",t.username),n.a.createElement("div",null,t.email),n.a.createElement("div",null,n.a.createElement(i.b,{id:"menulibraryhome",to:"/"}," View Home Page ")),n.a.createElement("div",null,n.a.createElement("hr",null),n.a.createElement("div",{onClick:e=>{e.preventDefault(),a(v()),m()}},n.a.createElement(i.b,{id:"menulogout",to:"/"},"Log Out")))):null)))};a(37);var q=function(e){let{isLoaded:t}=e;const a=Object(c.c)(e=>e.session.user);return n.a.createElement("nav",null,n.a.createElement("div",{id:"loginsignupnavbar"},t&&n.a.createElement(Y,{user:a})))};a(38);var J=function(e){let{isLoaded:t}=e;const a=Object(c.c)(e=>e.session.user);return n.a.createElement("nav",{className:"leftmenu"},n.a.createElement("div",{className:"leftmenufirst"},n.a.createElement("div",null,n.a.createElement(i.b,{to:"/",className:"home"},n.a.createElement("i",{id:"fa-houseicon",className:"fa-solid fa-house"})," "," Home")),a&&n.a.createElement("div",null,n.a.createElement(i.c,{to:"/songs/current"},n.a.createElement("button",null,"View my songs"))),a&&n.a.createElement("div",null,n.a.createElement(i.c,{to:"/playlists/current"},n.a.createElement("button",null,"View my playlists"))),a&&n.a.createElement("div",null,n.a.createElement(i.c,{to:"/albums/current"},n.a.createElement("button",null,"View my albums")))),n.a.createElement("div",{className:"leftmenulibrary"},n.a.createElement("div",null,n.a.createElement("i",{className:"fa-solid fa-headphones-simple"})," ","Your Library"),n.a.createElement("div",{className:"leftmenulibrarycreate"},n.a.createElement("div",{className:"leftmenulibrarycreate-1"},n.a.createElement("div",{id:"leftmenulibrarytext1"},"Let's dive into music"),n.a.createElement(i.c,{to:"/songs"},n.a.createElement("button",null,"View all the songs")),n.a.createElement(i.c,{to:"/playlists"},n.a.createElement("button",null,"View all the playlists")),n.a.createElement(i.c,{to:"/albums"},n.a.createElement("button",null,"View all the albums"))),a&&n.a.createElement("div",{className:"leftmenulibrarycreate-2"},n.a.createElement("div",{id:"leftmenulibrarytext2"},"Create a new album here. It's easy, we'll help you"),n.a.createElement(i.c,{to:"/albums/new"},n.a.createElement("button",null,"Create Album"))),a&&n.a.createElement("div",{className:"leftmenulibrarycreate-4"},n.a.createElement("div",{id:"leftmenulibrarytext4"},"Create a new playlist here. It's easy, we'll help you"),n.a.createElement(i.c,{to:"/playlists/new"},n.a.createElement("button",null,"Create Playlist"))),a&&n.a.createElement("div",{className:"leftmenulibrarycreate-3"},n.a.createElement("div",{id:"leftmenulibrarytext3"},"Create a new song here. It's easy, we'll help you"),n.a.createElement(i.c,{to:"/songs/new"},n.a.createElement("button",null,"Create Song"))))))};a(39);var K=e=>{let{song:t,formType:a}=e;const s=Object(c.b)(),r=Object(V.f)(),[i]=Object(l.useState)(null===t||void 0===t?void 0:t.id),[o,m]=Object(l.useState)((null===t||void 0===t?void 0:t.artist_name)||""),[u,d]=Object(l.useState)((null===t||void 0===t?void 0:t.title)||""),[E,p]=Object(l.useState)((null===t||void 0===t?void 0:t.lyrics)||""),[g,b]=Object(l.useState)((null===t||void 0===t?void 0:t.url)||""),[y,f]=Object(l.useState)((null===t||void 0===t?void 0:t.duration)||""),[v,h]=Object(l.useState)((null===t||void 0===t?void 0:t.release_date)||""),[j,N]=Object(l.useState)(null===t||void 0===t?void 0:t.song_file);console.log("This is song_file:",j);const[S,w]=Object(l.useState)(!1),[k,_]=Object(l.useState)({}),L="Create Song"===a?"Create a New Song":"Update Your Song",C=()=>{const e={};return o&&""!==String(o).trim()||(e.artistName="Artist Name is required"),u&&""!==String(u).trim()||(e.title="Title is required"),E&&""!==String(E).trim()||(e.lyrics="Lyrics is required"),(e=>{try{return new URL(e),!0}catch(t){return!1}})(g)||(e.url="Invalid URL format"),y&&""!==String(y).trim()&&!isNaN(Number(y))||(e.duration="Duration is required and must be a number"),v&&""!==String(v).trim()||(e.release_date="Release Date is required"),j||(e.song_file="Song File is required"),_(e),0===Object.keys(e).length},T=k.artistName?"Artist Name: "+k.artistName:null,A=k.title?"Title: "+k.title:null,I=k.lyrics?"Lyrics: "+k.lyrics:null,R=k.url?"URL: "+k.url:null,P=k.duration?"Duration: "+k.duration:null,x=k.release_date?"Release Date: "+k.release_date:null,D=k.song_file?"Song File: "+k.song_file:null;return n.a.createElement("div",{className:"songformwrapper"},n.a.createElement("div",{className:"songform-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"songform-2"},n.a.createElement("form",{className:"form",onSubmit:async e=>{e.preventDefault(),_({});if(C()){const e=new FormData;e.append("song_file",j),e.append("artist_name",o),e.append("title",u),e.append("lyrics",E),e.append("url",g),e.append("duration",y),e.append("release_date",v),console.log("This is formdata after appending everything",e),w(!0);try{"Update Song"===a?await s(((e,t)=>async a=>{const l=await fetch(`/api/songs/${t}/edit`,{method:"PUT",headers:{},body:e});if(console.log("Full response from server for put:",l),l.ok){const{data:e}=await l.json();return console.log("Data received from server:",e),a({type:"songs/UPDATE_SONG",song:e}),e}return l})(e,i)):"Create Song"===a&&await s((t=e,async e=>{try{const a=await fetch("/api/songs/new",{method:"POST",body:t});if(a.ok){const t=await a.json();return e(O(t)),t}return null}catch(a){return console.error("An error occurred:",a),null}})),r.push("/songs")}catch(l){console.error("Error:",l.message),l instanceof TypeError&&console.error("Error: res.json is not a function")}finally{w(!1),r.push("/songs")}}var t},encType:"multipart/form-data"},n.a.createElement("p",{className:"formHeading"},L),n.a.createElement("div",{className:"errors"},n.a.createElement("ul",null,T),n.a.createElement("ul",null,A),n.a.createElement("ul",null,I),n.a.createElement("ul",null,R),n.a.createElement("ul",null,P),n.a.createElement("ul",null,x),n.a.createElement("ul",null,D)),n.a.createElement("p",{className:"formSubheading"},"Want to share your song?"),n.a.createElement("p",{className:"nomal"},"Some details about your song."),n.a.createElement("div",{className:"formNormal"},n.a.createElement("label",null,"Artist Name",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:o,placeholder:"Artist Name",onChange:e=>m(e.target.value)}),n.a.createElement("br",null)),n.a.createElement("label",null,"Song Title",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:u,placeholder:"Song Title",onChange:e=>d(e.target.value)}),n.a.createElement("br",null)),n.a.createElement("label",null,"Lyrics",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:E,placeholder:"Lyrics",onChange:e=>p(e.target.value)}),n.a.createElement("br",null)),n.a.createElement("label",null,"Song Image URL",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:g,placeholder:"Song Image URL",onChange:e=>b(e.target.value)}),n.a.createElement("br",null)),n.a.createElement("label",null,"Song Duration",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:y,placeholder:"Song Duration",onChange:e=>f(e.target.value)}),n.a.createElement("br",null)),n.a.createElement("label",null,"Release Date",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:v,placeholder:"Release Date",onChange:e=>h(e.target.value)}),n.a.createElement("br",null)),n.a.createElement("label",null,"Upload Song File",n.a.createElement("br",null),n.a.createElement("input",{type:"file",accept:"audio/*",placeholder:"Upload Song File",onChange:e=>N(e.target.files[0])}),n.a.createElement("br",null))),n.a.createElement("button",{className:"submitFormButton",type:"submit"},a),S&&n.a.createElement("p",null,"Loading..."))))};var W=()=>n.a.createElement(K,{song:{artist_name:"",title:"",lyrics:"",url:"",duration:"",release_date:"",song_file:""},formType:"Create Song"});var H=()=>{const e=Object(c.b)(),{songId:t}=Object(V.g)(),a=Object(c.c)(e=>e.songsReducer[t]),s=Object(c.c)(e=>e.artistsReducer);let r;var i;(Object(l.useEffect)(()=>{e(j(t)).then(()=>{e(x())})},[e,t]),a)&&(r=null===(i=Object.values(Object.values(s)[0]).filter(e=>e.id===a.artist_id)[0])||void 0===i?void 0:i.name,a.artist_name=r);return a?Object.keys(a).length>1&&n.a.createElement(n.a.Fragment,null,n.a.createElement(K,{song:a,formType:"Update Song"})):n.a.createElement(n.a.Fragment,null)};a(40),a(41);var z=e=>{let{song:t}=e;const a=Object(c.c)(e=>e.session.user),{id:l,title:s,url:r}=t;a&&a.id;return n.a.createElement("div",{className:"songTile"},n.a.createElement(i.b,{id:"songlinkwithtext",to:"/songs/"+t.id,key:""+l},n.a.createElement("div",{id:"songgrid1"},n.a.createElement("div",{id:"songitem1"},n.a.createElement("img",{id:"songImage",src:r,alt:"song"})),n.a.createElement("div",{id:"songitem2"},s))))};var Q=()=>{const e=Object(c.b)(),t=Object(c.c)(e=>e.songsReducer.songs||[]),[a,s]=Object(l.useState)(!0);Object(l.useEffect)(()=>{e(async e=>{const t=await fetch("/api/songs/current");if(t.ok){const a=await t.json();return e(h(a)),a}return t}).then(()=>s(!1))},[e]);const r=Object(c.c)(e=>e.session.user);if(a)return n.a.createElement(n.a.Fragment,null,"Loading...");const o=t?t.filter(e=>e.user_id===r.id):[],m=o.length>0;return n.a.createElement("div",{className:"manageSongwrapper"},n.a.createElement("div",{className:"manageSongitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"manageSongitem-2"},n.a.createElement("p",{className:"title"},"Manage Songs"),!m&&n.a.createElement(i.b,{to:"/songs/new"},n.a.createElement("button",{className:"createSongButton"},"Create a New Song")),m&&n.a.createElement("ul",{className:"manageSongIndex"},o.map(e=>n.a.createElement("ul",{className:"manageEachSong",key:String(e.id)},n.a.createElement(z,{song:e}))))))};a(42),a(43);var X=e=>{let{album:t}=e;Object(c.b)();const a=Object(c.c)(e=>e.session.user),{id:l,title:s,url:r}=t;a&&a.id;return n.a.createElement(i.b,{id:"albumlinkwithtext",to:"/albums/"+l,key:""+l},n.a.createElement("div",{id:"albumgrid1"},n.a.createElement("div",{id:"albumitem1"},n.a.createElement("img",{id:"albumImage",src:r,alt:"album"})),n.a.createElement("div",{id:"albumitem2"},s)))};var Z=()=>{const e=Object(c.b)(),t=Object(c.c)(e=>Object.values(e.albumsReducer||{})),[a,s]=Object(l.useState)(!0),r=Object(c.c)(e=>e.session.user);if(Object(l.useEffect)(()=>{r&&e(k()).then(()=>s(!1))},[e,r]),a)return n.a.createElement(n.a.Fragment,null,"Loading...");const o=t?t.filter(e=>e.user_id===(null===r||void 0===r?void 0:r.id)):[],m=o.length>0;return n.a.createElement("div",{className:"manageAlbumwrapper"},n.a.createElement("div",{className:"manageAlbumitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"manageAlbumitem-2"},n.a.createElement("p",{className:"title"},"Manage Albums"),!m&&n.a.createElement(i.b,{to:"/albums/new"},n.a.createElement("button",{className:"createAlbumButton"},"Create a New Album")),m&&n.a.createElement("ul",{className:"manageAlbumIndex"},o.map(e=>n.a.createElement("ul",{className:"manageEachAlbum",key:String(e.id)},e&&n.a.createElement(X,{album:e}))))))};a(44),a(45),a(46);var ee=e=>{let{playlist:t}=e;Object(c.b)();const a=Object(c.c)(e=>e.session.user),{id:l,title:s,user_id:r,url:o}=t;a&&a.id;return n.a.createElement("div",{className:"playlistTile"},n.a.createElement(i.b,{id:"playlistlinkwithtext",to:"/playlists/"+t.id,key:""+l},n.a.createElement("div",{id:"playlistgrid1"},n.a.createElement("div",{id:"playlistitem1"},n.a.createElement("img",{id:"playlistImage",src:o,alt:"playlist"})),n.a.createElement("div",{id:"playlistitem2"},s))))};var te=()=>{const e=Object(c.b)(),t=Object(c.c)(e=>Object.values(e.playlistsReducer.playlists.playlists||[])),[a,s]=Object(l.useState)(!0);Object(l.useEffect)(()=>{e(R()).then(()=>s(!1))},[e]);const r=Object(c.c)(e=>e.session.user);if(a)return n.a.createElement(n.a.Fragment,null,"Loading...");const o=t?t.filter(e=>e.user_id===r.id):[],m=o.length>0;return n.a.createElement("div",{className:"managePlaylistwrapper"},n.a.createElement("div",{className:"managePlaylistitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"managePlaylistitem-2"},n.a.createElement("p",{className:"title"},"Manage Playlists"),!m&&n.a.createElement(i.b,{to:"/playlists/new"},n.a.createElement("button",{className:"createPlaylistButton"},"Create a New Playlist")),m&&n.a.createElement("ul",{className:"managePlaylistIndex"},o.map(e=>n.a.createElement("ul",{className:"manageEachPlaylist",key:String(e.id)},e&&n.a.createElement(ee,{playlist:e}))))))};a(47);var ae=e=>{let{num:t}=e;const a=Object(c.b)(),s=Object(c.c)(e=>{var t;return null===(t=e.songsReducer)||void 0===t?void 0:t.songs}),[r,i]=Object(l.useState)(!0);return Object(l.useEffect)(()=>{a(async e=>{const t=await fetch("/api/songs");if(t.ok){const a=await t.json();return e(h(a)),a}return t}).then(()=>i(!1))},[a]),r?n.a.createElement(n.a.Fragment,null,"Loading..."):n.a.createElement("div",{className:"songIndexwrapper"},4!==t&&n.a.createElement("div",{className:"songIndexitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"songIndexitem-2"},4!==t&&n.a.createElement("h2",null," "," All Songs:"),n.a.createElement("ul",{className:"landingSongIndex"},4!==t&&Object.values(s).map((e,t)=>n.a.createElement(z,{song:e,key:t})),4===t&&Object.values(s).slice(0,4).map((e,t)=>n.a.createElement(z,{song:e,key:t})))))};a(48),a(49);var le=e=>{let{song:t}=e;const a=t.id,s=Object(c.b)(),[r,i]=Object(l.useState)({}),{closeModal:o}=d(),m=Object(V.f)();return n.a.createElement("div",null,n.a.createElement("p",{className:"heading"},"Confirm Delete"),n.a.createElement("p",{className:"subheading"},"Are you sure you want to remove this song?"),n.a.createElement("button",{className:"deleteSongYes",onClick:async e=>{e.preventDefault();try{await s((e=>async t=>{const a=await fetch("/api/songs/"+e,{method:"DELETE"});if(a.ok){const l=await a.json();return t((e=>({type:"songs/REMOVE_SONG",songId:e}))(e)),l}return a})(a)),o(),m.push("/songs")}catch(t){console.error("Error deleting song:",t);try{const e=await t.json();e&&e.errors&&i(e.errors)}catch(l){console.error("Error parsing JSON:",l)}}}},"Yes - Delete Song"),n.a.createElement("br",null),n.a.createElement("button",{className:"deleteSongNo",onClick:o},"No - Keep Song"))};a(50);var ne=e=>{let{song:t}=e;const a=t.id,s=Object(c.b)(),r=Object(V.f)(),i=Object(c.c)(e=>Object.values(e.albumsReducer||{})),o=Object(c.c)(e=>e.session.user),[m,u]=Object(l.useState)(!0),[E,p]=Object(l.useState)({}),{closeModal:g}=d();Object(l.useEffect)(()=>{s(k()).then(()=>u(!1))},[s]);const b=i?i.filter(e=>e.user_id===(null===o||void 0===o?void 0:o.id)):[],y=async(e,t)=>{try{await s(((e,t)=>async a=>{const l=await fetch(`/api/albums/${e}/songs/${t}`,{method:"POST"});if(l.ok){const e=await l.json();return a({type:"albums/RECEIVE_ALBUM_SONG",albumSong:e}),e}return l})(e,a)),await s(k()).then(()=>{g(),window.confirm(`Song successfully added to "${t}"`),r.push("/albums/"+e)})}catch(l){const e=await l.json();e&&e.errors&&p(e.errors)}};return m?n.a.createElement(n.a.Fragment,null,"Loading..."):n.a.createElement("div",null,n.a.createElement("p",{className:"heading"},"Which album would you like to add this song to?"),n.a.createElement("ul",null,b.map(e=>!(e=>e.songs.some(e=>e.id===a))(e)&&n.a.createElement("li",{key:e.id},n.a.createElement("button",{className:"addSongToAlbum",onClick:()=>y(e.id,e.title)},e.title)))))};a(51);var se=e=>{let{song:t}=e;const a=t.id,s=Object(c.b)(),r=Object(V.f)(),i=Object(c.c)(e=>Object.values(e.playlistsReducer.playlists.playlists||{})),o=Object(c.c)(e=>e.session.user),[m,u]=Object(l.useState)(!0),[E,p]=Object(l.useState)({}),{closeModal:g}=d();Object(l.useEffect)(()=>{s(R()).then(()=>u(!1))},[s]);const b=i?i.filter(e=>e.user_id===(null===o||void 0===o?void 0:o.id)):[],y=async(e,t)=>{try{await s(((e,t)=>async a=>{const l=await fetch(`/api/playlists/${e}/songs/${t}`,{method:"POST"});if(l.ok){const e=await l.json();return a({type:"playlists/ADD_SONG_TO_PLAYLIST",message:e}),e}return l})(e,a)),await s(R()).then(()=>{g(),window.confirm(`Song successfully added to "${t}"`),r.push("/playlists/"+e)})}catch(l){const e=await l.json();e&&e.errors&&p(e.errors)}};return m?n.a.createElement(n.a.Fragment,null,"Loading..."):n.a.createElement("div",null,n.a.createElement("p",{className:"heading"},"Which playlist would you like to add this song to?"),n.a.createElement("ul",null,b.map(e=>!(e=>e.songs.some(e=>e.id===a))(e)&&n.a.createElement("li",{key:e.id},n.a.createElement("button",{className:"addSongToPlaylist",onClick:()=>y(e.id,e.title)},e.title)))))};a(52);var re=e=>{let{song:t}=e;const a=t.id,s=Object(c.b)(),r=Object(V.f)(),i=Object(c.c)(e=>Object.values(e.albumsReducer||{})),{closeModal:o}=d(),[m,u]=Object(l.useState)(!0),[E,p]=Object(l.useState)({});Object(l.useEffect)(()=>{s(k()).then(()=>u(!1))},[s]);const g=e=>e.songs.some(e=>e.id===a),b=async(e,t)=>{if(g(i.find(t=>t.id===e)))try{await s(((e,t)=>async a=>{const l=await fetch(`/api/albums/${e}/songs/${t}`,{method:"DELETE"});if(l.ok){const n=await l.json();return await a(((e,t)=>({type:"albums/REMOVE_ALBUM_SONG",albumId:e,songId:t}))(e,t)),n}return l})(e,a)),await s(k()).then(()=>{o(),window.confirm(`Song successfully removed from "${t}"`),r.push("/albums/"+e)})}catch(l){const e=await l.json();e&&e.errors&&p(e.errors)}else window.alert("The selected album does not contain the specified song.")};return m?n.a.createElement(n.a.Fragment,null,"Loading..."):n.a.createElement("div",null,n.a.createElement("p",{className:"heading"},"Which album would you like to delete this song from?"),n.a.createElement("ul",null,i.map(e=>g(e)&&n.a.createElement("li",{key:e.id},n.a.createElement("button",{className:"deleteSongFromAlbum",onClick:()=>b(e.id,e.title)},e.title)))))};a(53);var ce=e=>{let{song:t}=e;const a=t.id,s=Object(c.b)(),r=Object(V.f)(),i=Object(c.c)(e=>Object.values(e.playlistsReducer.playlists.playlists||{})),o=Object(c.c)(e=>e.session.user),[m,u]=Object(l.useState)(!0),[E,p]=Object(l.useState)({}),{closeModal:g}=d();Object(l.useEffect)(()=>{s(R()).then(()=>u(!1))},[s]);const b=i?i.filter(e=>e.user_id===(null===o||void 0===o?void 0:o.id)):[],y=async(e,t)=>{try{await s(((e,t)=>async a=>{const l=await fetch(`/api/playlists/${e}/songs/${t}`,{method:"DELETE"});if(l.ok){const e=await l.json();return a({type:"playlists/REMOVE_SONG_FROM_PLAYLIST",message:e}),e}return l})(e,a)),await s(R()).then(()=>{g(),window.confirm(`Song successfully removed from "${t}"`),r.push("/playlists/"+e)})}catch(l){const e=await l.json();e&&e.errors&&p(e.errors)}};return m?n.a.createElement(n.a.Fragment,null,"Loading..."):n.a.createElement("div",null,n.a.createElement("p",{className:"heading"},"Which playlist would you like to delete this song from?"),n.a.createElement("ul",null,b.map(e=>(e=>e.songs.some(e=>e.id===a))(e)&&n.a.createElement("li",{key:e.id},n.a.createElement("button",{className:"deleteSongFromPlaylist",onClick:()=>y(e.id,e.title)},e.title)))))};a(54);var ie=function(e){let{songId:t,userId:a}=e;const s=Object(c.b)(),[r,i]=Object(l.useState)(!0),o=Object(c.c)(e=>e.session.user);t=parseInt(t);const m=Object(c.c)(e=>e.likesReducer),u=Object.values(m).filter(e=>!(e.song_id-t)).length-1;let d=Object.values(m).filter(e=>!(e.song_id-t)&&!(e.user_id-o.id));const[E,p]=Object(l.useState)(Object.keys(d[0]).length&&d[0].user_id==o.id);if(Object(l.useEffect)(()=>{s(j(t)).then(()=>s(L())).then(()=>s(C(t))).then(()=>i(!1))},[s,t]),r)return n.a.createElement(n.a.Fragment,null,"Loading...");const g=()=>{if(E){let e;d.length&&(e=d[0].id),s(((e,t)=>async e=>{const a=await fetch(`/api/songs/${t}/likes`,{method:"DELETE"});if(a.ok){const t=await a.json();return e({type:"likes/REMOVE_LIKE",like:t.id}),t}return a})(0,t))}if(!E){s(((e,t)=>async a=>{const l=await fetch(`/api/songs/${t}/likes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(l.ok){const e=await l.json();return a({type:"likes/RECEIVE_LIKE",like:e}),e}return l})({user_id:a,song_id:t},t))}p(!E)};return E?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"likediv",onClick:g},n.a.createElement("i",{id:"solidheart",className:"fa-solid fa-heart"})),n.a.createElement("div",null,u," liked this song")):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"likediv",onClick:g},n.a.createElement("i",{id:"regularheart",className:"fa-regular fa-heart"})),n.a.createElement("div",null,u," liked this song"))};var oe=()=>{const e=Object(c.b)(),t=Object(V.f)(),{songId:a}=Object(V.g)(),s=Object(c.c)(e=>e.session.user),r=Object(c.c)(e=>e.songsReducer[a]),[i,o]=(Object(c.c)(e=>e.likesReducer.likes),Object(l.useState)(!0)),[m,u]=Object(l.useState)(!1),d=Object(c.c)(e=>e.artistsReducer),E=Object(l.useRef)(),p=Object(c.c)(e=>e.albumsReducer),g=Object(c.c)(e=>e.playlistsReducer.playlists);Object.keys(p).length,Object.keys(g).length;if(Object(l.useEffect)(()=>{e(j(a)).then(()=>e(L())).then(()=>e(C(a))).then(()=>e(x())).then(()=>o(!1))},[e,a]),i||!r)return n.a.createElement(n.a.Fragment,null,"Loading...");const{user_id:b,artist_id:y,title:f,lyrics:v,url:h,duration:O,release_date:N}=r,S=Object.values(Object.values(d)[0]).filter(e=>e.id==y)[0].name,w=s?s.id:null,k=w===b,_=e=>{var t;(null===(t=E.current)||void 0===t?void 0:t.contains(e.target))||u(!1)},T=(e=>{let t=e%60;t<10&&t>=0&&(t="0"+t);return`${Math.floor(e/60)}:${t}`})(O);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"songDetailwrapper"},n.a.createElement("div",{className:"songDetailitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"songDetailitem-2"},n.a.createElement("img",{id:"songdetialimage",src:h,alt:"songdetailimage"}),n.a.createElement("p",{className:"title"}," Title: ",f),n.a.createElement("p",null,"Artist: ",S),n.a.createElement("p",{className:"lyrics"},"Lyrics: ",v),n.a.createElement("p",{className:"duration"},"Duration: ",T),n.a.createElement("p",{className:"release_date"},"Release Date: ",N),n.a.createElement("div",null,s&&n.a.createElement(ie,{userId:b,songId:a}),k&&n.a.createElement("button",{className:"songbuttons",onClick:_},n.a.createElement($,{itemText:"Delete Song",onItemClick:_,modalComponent:n.a.createElement(le,{song:r})})),k&&n.a.createElement("button",{className:"songbuttons",onClick:()=>{t.push(`/songs/${a}/edit`)}},n.a.createElement("p",null,"Edit Song"))),w&&n.a.createElement("button",{className:"songbuttons",onClick:_}," ",n.a.createElement($,{itemText:"Add Song to Album",onItemClick:_,modalComponent:n.a.createElement(ne,{song:r})})," "),w&&n.a.createElement("button",{className:"songbuttons",onClick:_}," ",n.a.createElement($,{itemText:"Add Song to Playlist",onItemClick:_,modalComponent:n.a.createElement(se,{song:r})})," "),w&&n.a.createElement("button",{className:"songbuttons",onClick:_}," ",n.a.createElement($,{itemText:"Remove Song from Album",onItemClick:_,modalComponent:n.a.createElement(re,{song:r})})," "),w&&n.a.createElement("button",{className:"songbuttons",onClick:_}," ",n.a.createElement($,{itemText:"Remove Song from Playlist",onItemClick:_,modalComponent:n.a.createElement(ce,{song:r})})," "))))};a(55);var me=function(e){let{num:t}=e;const a=Object(c.b)(),[s,r]=Object(l.useState)(!1),i=Object(c.c)(e=>e.albumsReducer);return Object(l.useEffect)(()=>{a(async e=>{const t=await fetch("/api/albums");if(t.ok){const a=await t.json();return e(S(a)),a}return t}).then(()=>r(!0))},[a]),s?s?n.a.createElement("div",{className:"albumwrapper"},4!==t&&n.a.createElement("div",{className:"albumitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"albumitem-2"},4!==t&&n.a.createElement("h2",null," "," All Albums:"),n.a.createElement("ul",{className:"viewalbums"},4!==t&&Object.values(i).map((e,t)=>n.a.createElement(X,{album:e,key:t})),4===t&&Object.values(i).slice(0,4).map((e,t)=>n.a.createElement(X,{album:e,key:t}))))):void 0:n.a.createElement("div",null,"Loading...")};a(56),a(57);var ue=e=>{let{album:t}=e;const a=t.id,s=Object(c.b)(),[r,i]=Object(l.useState)({}),{closeModal:o}=d(),m=Object(V.f)();return n.a.createElement("div",null,n.a.createElement("p",{className:"heading"},"Confirm Delete"),n.a.createElement("p",{className:"subheading"},"Are you sure you want to remove this album?"),n.a.createElement("button",{className:"deleteAlbumYes",onClick:async e=>{e.preventDefault();try{await s((e=>async t=>{const a=await fetch("/api/albums/"+e,{method:"DELETE"});if(a.ok){const l=await a.json();return t({type:"albums/REMOVE_ALBUM",album:e}),l}return a})(a)),o(),await m.push("/albums")}catch(t){console.error("Error deleting album:",t);try{const e=await t.json();e&&e.errors&&i(e.errors)}catch(l){console.error("Error parsing JSON:",l)}}}},"Yes - Delete Album"),n.a.createElement("br",null),n.a.createElement("button",{className:"deleteAlbumNo",onClick:o},"No - Keep Album"))};var de=()=>{const e=Object(c.b)(),t=Object(V.f)(),{albumId:a}=Object(V.g)(),s=Object(c.c)(e=>e.session.user),r=Object(c.c)(e=>e.albumsReducer[a]),o=Object(c.c)(e=>e.artistsReducer),[m,u]=Object(l.useState)(!0),[d,E]=Object(l.useState)(!1),p=Object(l.useRef)();if(Object(l.useEffect)(()=>{e(x()).then(()=>{e(w(a))}).then(()=>u(!1))},[e,a]),m||!r||!o)return n.a.createElement(n.a.Fragment,null,"Loading...");const{user_id:g,title:b,url:y,release_date:f,copyright:v}=r,h=s&&s.id===g;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"albumDetailwrapper"},n.a.createElement("div",{className:"albumDetailitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"albumDetailitem-2"},n.a.createElement("p",{className:"title"},"Title: ",b),n.a.createElement("img",{id:"albumdetialimage",src:y,alt:"albumdetailimage"}),n.a.createElement("p",{className:"release_date"},"Release Date: ",f),null!==v&&n.a.createElement("p",{className:"copyright"},v),r.songs&&r.songs.length>0&&n.a.createElement("div",null,n.a.createElement("p",{className:"songs"},"Songs:"),n.a.createElement("ul",null,n.a.createElement("div",{key:r.songs.id+"grid",className:"songgrid"},n.a.createElement("div",{key:r.songs.id+"index",className:"songgridindex"},"#"," ","Title"),n.a.createElement("div",{key:r.songs.id+"artist",className:"songgridartist"},"Artist"),n.a.createElement("div",{key:r.songs.id+"update",className:"songgridupdate"},"Song Modified"),n.a.createElement("div",{key:r.songs.id+"clock",className:"songgridclock"},n.a.createElement("i",{id:"faregularfaclock",className:"fa-regular fa-clock"}))),r.songs.map((e,t)=>n.a.createElement("div",{key:t+"gridone",className:"songgridone"},n.a.createElement("div",{key:t+"indexone",className:"songgridindexone"},t+1,". ",n.a.createElement(i.b,{id:"songlinkwithtext",to:"/songs/"+e.id,key:""+e.id},n.a.createElement("img",{id:"playlistsongimage",src:e.url}),e.title)),n.a.createElement("div",{key:t+"artistone",className:"songgridartistone"},((e,t)=>{const a=[];return e.songs.forEach(e=>{a.push(Object.values(Object.values(t)[0]).filter(t=>t.id==e.artist_id)[0].name)}),a})(r,o)[t]),n.a.createElement("div",{key:t+"updateone",className:"songgridupdateone"},e.updated_at.slice(7,12),e.updated_at.slice(4,7),",",e.updated_at.slice(11,16)),n.a.createElement("div",{key:t+"clockone",className:"songgridclockone"},(e=>{let t=e%60;t<10&&t>=0&&(t="0"+t);return`${Math.floor(e/60)}:${t}`})(e.duration)))))),h&&n.a.createElement("button",null,n.a.createElement($,{itemText:"Delete",onItemClick:e=>{var t;(null===(t=p.current)||void 0===t?void 0:t.contains(e.target))||E(!1)},modalComponent:n.a.createElement(ue,{album:r})})),h&&n.a.createElement("button",{onClick:()=>{t.push(`/albums/${a}/edit`)}},"Edit"))))};a(58);var Ee=e=>{var t,a,s,r,i;let{album:o,formType:m}=e;const u=Object(c.b)(),d=Object(V.f)(),E=Object(c.c)(e=>e.session.user),p=null===(t=o)||void 0===t?void 0:t.user_id;let[g,b]=Object(l.useState)((null===(a=o)||void 0===a?void 0:a.title)||""),[y,f]=Object(l.useState)((null===(s=o)||void 0===s?void 0:s.url)||""),[v,h]=Object(l.useState)((null===(r=o)||void 0===r?void 0:r.release_date)||""),[O,j]=Object(l.useState)((null===(i=o)||void 0===i?void 0:i.copyright)||""),[N,S]=Object(l.useState)({});const[w,k]=Object(l.useState)(!1),_="Create Album"===m?"Create a New Album":"Update Your Album";Object(l.useEffect)(()=>{const e={title:[],url:[],release_date:[],copyright:[]};g.length||e.title.push("Title is required"),y.length||e.url.push("URL is required"),v.length||e.release_date.push("Release date is required"),O.length||e.copyright.push("Copyright is required"),S(e)},[g,y,v,O]);return n.a.createElement("div",{className:"albumformwrapper"},n.a.createElement("div",{className:"albumform-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"albumform-2"},n.a.createElement("form",{className:"form",onSubmit:async e=>{let t;if(e.preventDefault(),k(!0),o={...o,title:g,release_date:v,url:y,copyright:O},N.title.length+N.release_date.length+N.url.length+N.copyright.length>0);else{if("Update Album"===m){if(E&&p!==E.id)return void d.push("/");t=await u((e=>async t=>{const a=await fetch("/api/albums/"+e.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){const e=await a.json();return t((e=>({type:"albums/UPDATE_ALBUM",album:e}))(e)),e}return a})(o))}else"Create Album"===m&&(t=await u((a=o,async e=>{const t=await fetch("/api/albums/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok){const a=await t.json();return e({type:"albums/RECEIVE_ALBUM",album:a}),a}return t})));if(t.id)d.push("/albums/"+t.id);else{const{validationErrors:e}=await t.json();S(e)}}var a}},n.a.createElement("p",{className:"formHeading"},_),n.a.createElement("p",{className:"formSubheading"},"Want to share your album?"),n.a.createElement("p",{className:"nomal"},"Some details about your album."),n.a.createElement("div",{className:"formNormal"},n.a.createElement("label",null,"Album Title",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:g,placeholder:"Album Title",onChange:e=>b(e.target.value)}),n.a.createElement("br",null),w&&N.title.length>0&&N.title.map((e,t)=>n.a.createElement("div",{key:t},n.a.createElement("p",{className:"error"},e)))),n.a.createElement("label",null,"Album Image URL",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:y,placeholder:"Album Image URL",onChange:e=>f(e.target.value)}),n.a.createElement("br",null),w&&N.url.length>0&&N.url.map((e,t)=>n.a.createElement("div",{key:t},n.a.createElement("p",{className:"error"},e)))),n.a.createElement("label",null,"Release Date",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:v,placeholder:"Release Date",onChange:e=>h(e.target.value)}),n.a.createElement("br",null),w&&N.release_date.length>0&&N.release_date.map((e,t)=>n.a.createElement("div",{key:t},n.a.createElement("p",{className:"error"},e)))),n.a.createElement("label",null,"Copyright",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:O,placeholder:"Copyright",onChange:e=>j(e.target.value)}),n.a.createElement("br",null),w&&N.copyright.length>0&&N.copyright.map((e,t)=>n.a.createElement("div",{key:t},n.a.createElement("p",{className:"error"},e))))),n.a.createElement("button",{className:"submitFormButton",type:"submit"},m))))};var pe=()=>{const e=Object(c.b)(),{albumId:t}=Object(V.g)(),a=Object(c.c)(e=>e.albumsReducer[t]);return Object(l.useEffect)(()=>{e(w(t))},[e,t]),a?Object.keys(a).length>1&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ee,{album:a,formType:"Update Album"})):n.a.createElement(n.a.Fragment,null)};var ge=()=>n.a.createElement(Ee,{album:{title:"",url:"",release_date:"",copyright:""},formType:"Create Album"});a(59);var be=e=>{let{num:t}=e;const a=Object(c.b)(),s=Object(c.c)(e=>e.playlistsReducer.playlists),[r,i]=Object(l.useState)(!0);return Object(l.useEffect)(()=>{a(async e=>{const t=await fetch("/api/playlists");if(t.ok){const a=await t.json();e(A(a.playlists))}}).then(()=>i(!1))},[a]),r?n.a.createElement(n.a.Fragment,null,"Loading..."):n.a.createElement("div",{className:"playlistIndexwrapper"},4!==t&&n.a.createElement("div",{className:"playlistIndexitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"playlistIndexitem-2"},4!==t&&n.a.createElement("h2",null," "," All Playlists:"),n.a.createElement("ul",{className:"landingPlaylistIndex"},4!==t&&s.map((e,t)=>n.a.createElement(ee,{playlist:e,key:t})),4===t&&s.slice(0,4).map((e,t)=>n.a.createElement(ee,{playlist:e,key:t})))))};a(60);var ye=()=>{const e=Object(c.b)(),t=Object(V.f)(),{playlistId:a}=Object(V.g)(),s=Object(c.c)(e=>e.session.user),r=Object(c.c)(e=>e.playlistsReducer.currentPlaylist),o=Object(c.c)(e=>e.artistsReducer),[m,u]=Object(l.useState)(!0);Object(l.useEffect)(()=>{e(x()).then(()=>{e(I(a))}).then(()=>u(!1))},[e,a]);if(m||!r||!o)return n.a.createElement(n.a.Fragment,null,"Loading...");const{user_id:d,title:E,url:p,description:g}=r,b=s&&s.id===d;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"playlistDetailwrapper"},n.a.createElement("div",{className:"playlistDetailitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"playlistDetailitem-2"},n.a.createElement("p",{className:"title"},"Title: ",E),n.a.createElement("img",{id:"playlistdetailimage",src:p,alt:"playlistdetailimage"}),null!==g&&n.a.createElement("p",{className:"description"},"Description: ",g),r.songs&&r.songs.length>0&&n.a.createElement("div",null,n.a.createElement("p",{className:"songs"},"Songs:"),n.a.createElement("ul",null,n.a.createElement("div",{key:r.songs.id+"o",className:"songgrid"},n.a.createElement("div",{key:r.songs.id+"t",className:"songgridindex"},"#"," ","Title"),n.a.createElement("div",{key:r.songs.id+"th",className:"songgridartist"},"Artist"),n.a.createElement("div",{key:r.songs.id+"f",className:"songgridupdate"},"Song Modified"),n.a.createElement("div",{key:r.songs.id+"fi",className:"songgridclock"},n.a.createElement("i",{id:"faregularfaclock",className:"fa-regular fa-clock"}))),r.songs.map((e,t)=>n.a.createElement("div",{key:t+"one",className:"songgridone"},n.a.createElement("div",{key:t+"two",className:"songgridindexone"},t+1,". ",n.a.createElement(i.b,{id:"songlinkwithtext",to:"/songs/"+e.id,key:""+e.id},n.a.createElement("img",{id:"playlistsongimage",src:e.url}),e.title)),n.a.createElement("div",{key:t+"three",className:"songgridartistone"},((e,t)=>{const a=[];return e.songs.forEach(e=>{a.push(Object.values(Object.values(t)[0]).filter(t=>t.id==e.artist_id)[0].name)}),a})(r,o)[t]),n.a.createElement("div",{key:t+"four",className:"songgridupdateone"},e.updated_at.slice(7,12),e.updated_at.slice(4,7),",",e.updated_at.slice(11,16)),n.a.createElement("div",{key:t+"five",className:"songgridclockone"},(e=>{let t=e%60;t<10&&t>=0&&(t="0"+t);return`${Math.floor(e/60)}:${t}`})(e.duration)))))),b&&n.a.createElement("button",{onClick:()=>{t.push(`/playlists/${a}/edit`)}},"Edit"))))};a(61),a(62);var fe=function(){return n.a.createElement("nav",null,n.a.createElement("div",{id:"MainPageContentCss"},n.a.createElement("div",null,n.a.createElement("p",null,"Spotify Songs"),n.a.createElement("ul",{className:"MainPageFourSong"},n.a.createElement(ae,{num:4}))),n.a.createElement("div",null,n.a.createElement("p",null,"Spotify Albums"),n.a.createElement("ul",{className:"MainPageFourAlbum"},n.a.createElement(me,{num:4}))),n.a.createElement("div",null,n.a.createElement("p",null,"Spotify Playlists"),n.a.createElement("ul",{className:"MainPageFourPlaylist"},n.a.createElement(be,{num:4})))))};var ve=function(){return n.a.createElement("nav",null,n.a.createElement("div",{className:"homewrapper"},n.a.createElement("div",{className:"homeitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"homeitem-2"},n.a.createElement(fe,null))))};a(63);var he=e=>{var t,a,s;let{playlist:r,formType:i}=e;const o=Object(c.b)(),m=Object(V.f)(),[u,d]=Object(l.useState)((null===(t=r)||void 0===t?void 0:t.title)||""),[E,p]=Object(l.useState)(null===(a=r)||void 0===a?void 0:a.url),[g,b]=Object(l.useState)(null===(s=r)||void 0===s?void 0:s.description),[y,f]=Object(l.useState)({}),v="Create Playlist"===i?"Create a New Playlist":"Update Your Playlist",h=()=>{const e={};return u&&""!==u.trim()||(e.title="Title is required"),(e=>{try{return new URL(e),!0}catch(t){return!1}})(E)||(e.url="Invalid URL format"),f(e),0===Object.keys(e).length},O=y.title?"Title: "+y.title:null,j=y.url?"URL: "+y.url:null;return n.a.createElement("div",{className:"playlistformwrapper"},n.a.createElement("div",{className:"playlistformitem-1"},n.a.createElement(J,null)),n.a.createElement("div",{className:"playlistformitem-2"},n.a.createElement("form",{className:"form",onSubmit:async e=>{e.preventDefault(),f({});const t=h();if(r={...r,title:u,url:E,description:g},t)try{let e;if("Update Playlist"===i)e=await o((e=>async t=>{const a=await fetch(`/api/playlists/${e.id}/edit`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){const e=await a.json();return t((e=>({type:"playlists/UPDATE_PLAYLIST",playlist:e}))(e.playlist)),e}return a})(r));else if("Create Playlist"===i){const t=await o((a=r,async e=>{try{const t=await fetch("/api/playlists/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok){const a=await t.json();return a.playlist?(e({type:"playlists/CREATE_PLAYLIST",playlist:a.playlist}),a):(console.error("Invalid playlist data in the response:",a),t)}return console.error("Server response is not OK:",t),t}catch(t){return console.error("Error:",t),t}}));if(!t.ok)return void console.error("Server response is not OK:",t);const l=t.headers.get("content-type");if(!l||!l.includes("application/json"))return void console.error("Server response is not in JSON format");e=(await t.json()).playlist}m.push("/playlists/")}catch(l){console.error("Error:",l),m.push("/playlists/"),l instanceof TypeError&&console.error("Error: res.json is not a function")}finally{m.push("/playlists")}var a}},n.a.createElement("p",{className:"formHeading"},v),n.a.createElement("div",{className:"errors"},n.a.createElement("ul",null,O),n.a.createElement("ul",null,j)),n.a.createElement("p",{className:"formSubheading"},"Want to share your playlist?"),n.a.createElement("p",{className:"nomal"},"Some details about your playlist."),n.a.createElement("div",{className:"formNormal"},n.a.createElement("label",null,"Playlist Title",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:u,placeholder:"Playlist Title",onChange:e=>d(e.target.value)}),n.a.createElement("br",null)),n.a.createElement("label",null,"Playlist Image URL",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:E,placeholder:"Playlist Image URL",onChange:e=>p(e.target.value)}),n.a.createElement("br",null)),n.a.createElement("label",null,"Playlist Description(Optional)",n.a.createElement("br",null),n.a.createElement("input",{type:"text",value:g,placeholder:"Playlist Description",onChange:e=>b(e.target.value)}))),n.a.createElement("button",{className:"submitFormButton",type:"submit"},i))))};var Oe=()=>{const e=Object(c.b)(),{playlistId:t}=Object(V.g)(),a=Object(c.c)(e=>{var t;return null===(t=e.playlistsReducer)||void 0===t?void 0:t.currentPlaylist});return Object(l.useEffect)(()=>{e(I(t))},[e,t]),a?Object.keys(a).length>1&&n.a.createElement(n.a.Fragment,null,n.a.createElement(he,{playlist:a,formType:"Update Playlist"})):n.a.createElement(n.a.Fragment,null,"loading ////")};var je=()=>n.a.createElement(he,{playlist:{title:"",url:"",description:""},formType:"Create Playlist"});var Ne=function(){const e=Object(c.b)(),[t,a]=Object(l.useState)(!1);return Object(l.useEffect)(()=>{e(async e=>{const t=await fetch("/api/auth/",{headers:{"Content-Type":"application/json"}});if(t.ok){const a=await t.json();if(a.errors)return;e(b(a))}}).then(()=>a(!0))},[e]),n.a.createElement(n.a.Fragment,null,n.a.createElement(q,{isLoaded:t}),t&&n.a.createElement(V.c,null,n.a.createElement(V.a,{exact:!0,path:"/"},n.a.createElement(ve,null)),n.a.createElement(V.a,{exact:!0,path:"/albums/current",component:Z}),n.a.createElement(V.a,{path:"/albums",exact:!0},n.a.createElement(me,null)),n.a.createElement(V.a,{path:"/albums/:albumId(\\d+)",exact:!0},n.a.createElement(de,null)),n.a.createElement(V.a,{path:"/albums/:albumId/edit",exact:!0},n.a.createElement(pe,null)),n.a.createElement(V.a,{exact:!0,path:"/albums/new",component:ge}),n.a.createElement(V.a,{exact:!0,path:"/albums/current",component:Z}),n.a.createElement(V.a,{exact:!0,path:"/songs/current",component:Q}),n.a.createElement(V.a,{exact:!0,path:"/songs/new",component:W}),n.a.createElement(V.a,{exact:!0,path:"/songs/:songId(\\d+)/edit",component:H}),n.a.createElement(V.a,{exact:!0,path:"/songs/:songId(\\d+)",component:oe}),n.a.createElement(V.a,{exact:!0,path:"/songs",component:ae}),n.a.createElement(V.a,{exact:!0,path:"/playlists/current",component:te}),n.a.createElement(V.a,{exact:!0,path:"/playlists/new",component:je}),n.a.createElement(V.a,{exact:!0,path:"/playlists/:playlistId(\\d+)/edit",component:Oe}),n.a.createElement(V.a,{exact:!0,path:"/playlists/:playlistId(\\d+)",component:ye}),n.a.createElement(V.a,{exact:!0,path:"/playlists",component:be})))};a(64);const Se=F();function we(){return n.a.createElement(m,null,n.a.createElement(c.a,{store:Se},n.a.createElement(i.a,null,n.a.createElement(Ne,null),n.a.createElement(u,null))))}r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(we,null)),document.getElementById("root"))}]),[[18,1,2]]]);
//# sourceMappingURL=main.6be719d2.chunk.js.map